
{
"name":"ivre",
"description":"Install IVRE framework",
"install": [
"sudo apt-get -q update",
"sudo apt-get -qy --no-install-recommends install python3-pymongo python3-cryptography python3-setuptools python3-bottle python3-openssl ca-certificates -y",
"sudo apt-get -qy --no-install-recommends install git",
"git clone https://github.com/ivre/ivre",
"cd ivre/ && python3 setup.py build && sudo python3 setup.py install && cd /home/op/",
"sudo apt-get -qy --no-install-recommends install rsync screen ipython3 openssl tesseract-ocr libfreetype6 libfontconfig1 fonts-dejavu imagemagick ffmpeg s3270 patch bash-completion bzip2 python3-pil nfdump",
"wget https://nmap.org/dist/nmap-7.92.tgz -O nmap.tar.gz",
"sudo apt-get -qy --no-install-recommends install build-essential libssl-dev flex bison",
"tar zxf nmap.tar.gz  && cd nmap-7.92",
"sudo ./configure --without-ndiff --without-zenmap --without-nping  --without-ncat --without-nmap-update    --with-libpcap=included && sudo make && sudo make install && cd /home/op",
"sudo apt-get -qy --no-install-recommends install gnupg wget",
"echo 'deb http://download.opensuse.org/repositories/security:/zeek/Debian_11/ /' | sudo tee -e /etc/apt/sources.list.d/zeek.list",
"wget -qO - https://download.opensuse.org/repositories/security:zeek/Debian_11/Release.key | sudo apt-key add - ",
"sudo apt-get -q update && sudo apt-get -qy --no-install-recommends install zeek",
"wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-1.9.8-linux-x86_64.tar.bz2 && tar jxf phantomjs-1.9.8-linux-x86_64.tar.bz2 phantomjs-1.9.8-linux-x86_64/bin/phantomjs",
"sudo mv phantomjs-1.9.8-linux-x86_64/bin/phantomjs /usr/local/bin/",
"sudo cp /home/op/ivre/nmap_scripts/* /usr/local/share/nmap/scripts",
"sudo cp /home/op/ivre/nmap_scripts/* /home/op/nmap-7.92/scripts",
"cd /home/op/nmap-7.92/ && sudo ./nmap --script-update",
"sudo nmap --script-update",
"sudo apt-get -qy --no-install-recommends install gnupg wget ca-certificates",
"wget -qO - https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add - ",
"sudo echo \"deb http://repo.mongodb.org/apt/debian buster/mongodb-org/4.4 main\" | sudo tee -a /etc/apt/sources.list.d/mongodb-org-4.4.list",
"sudo ln -s /bin/true /usr/bin/systemctl",
"sudo apt-get -q update && sudo apt-get -qy --no-install-recommends install mongodb-org",
"/usr/bin/mongod -f /etc/mongod.conf",
"sudo apt-get -qy --no-install-recommends install nginx spawn-fcgi php-fpm php-gd fcgiwrap uwsgi-plugin-python3",
"curl https://raw.githubusercontent.com/ivre/ivre/master/docker/web/nginx-default-site | sudo tee -a /etc/nginx/sites-available/default",
"sudo echo '\ndaemon off;' | sudo tee -a /etc/nginx/nginx.conf",
"sudo mkdir /var/run/uwsgi",
"wget http://download.dokuwiki.org/src/dokuwiki/dokuwiki-stable.tgz",
"tar -zxf dokuwiki-stable.tgz",
"sudo mv dokuwiki-2020-07-29 /var/www/dokuwiki",
"sudo apt-get -qy --no-install-recommends install patch",
"sudo patch /var/www/dokuwiki/inc/html.php /usr/local/share/ivre/dokuwiki/backlinks.patch",
"sudo ln -s /usr/local/share/ivre/dokuwiki/doc /var/www/dokuwiki/data/pages/doc",
"sudo ln -s /usr/local/share/ivre/dokuwiki/media/logo.png /var/www/dokuwiki/data/media/wiki/logo.png",
"sudo mkdir var/www/dokuwiki/data/media/doc",
"sudo ln -s /usr/local/share/doc/ivre/screenshots /var/www/dokuwiki/data/media/doc/",
"sudo ln -s /usr/local/share/ivre/dokuwiki/media/doc /var/www/dokuwiki/data/media/wiki/doc",
"sudo echo 'WEB_GET_NOTEPAD_PAGES = (\"localdokuwiki\", (\"/var/www/dokuwiki/data/pages\",))' | sudo tee -a /etc/ivre.conf",
"sudo rm var/www/dokuwiki/install.php",
"curl https://raw.githubusercontent.com/ivre/ivre/master/docker/web/doku-conf-local.php | sudo tee -a /var/www/dokuwiki/conf/local.php",
"curl https://raw.githubusercontent.com/ivre/ivre/master/docker/web/doku-conf-plugins.local.php | sudo tee -a /var/www/dokuwiki/conf/plugins.local.php",
"curl https://raw.githubusercontent.com/ivre/ivre/master/docker/web/doku-conf-acl.auth.php | sudo tee -a /var/www/dokuwiki/conf/acl.auth.php",
"curl https://raw.githubusercontent.com/ivre/ivre/master/docker/web/doku-conf-users.auth.php | sudo tee -a /var/www/dokuwiki/conf/users.auth.php",
"sudo chown -Rh www-data:www-data /var/www/dokuwiki/data /var/www/dokuwiki/conf /var/www/dokuwiki/lib/plugins",
"sudo chown -Rh op:www-data /var/www/dokuwiki/data /var/www/dokuwiki/conf /var/www/dokuwiki/lib/plugins",
"sudo service php-fpm start",
"sudo ln -s /var/run/php/php7.4-fpm.sock /etc/init.d/php-fpm",
"sudo service fcgiwrap start",
"sudo uwsgi --plugin /usr/lib/uwsgi/plugins/python3_plugin.so  --daemonize /var/log/nginx/uwsgi.log  --socket /var/run/uwsgi/sock   --processes 4 --threads 2  --mount /cgi=/home/op/ivre/web/wsgi/app.wsgi --manage-script-name"
    ],
    "uninstall":[
        ""
    ],
    "notes":"Install Complete."
}
